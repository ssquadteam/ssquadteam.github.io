<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flappy Bird Game</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; background-color: #4ec0ca; }
  #gameOverScreen { display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); color: white; font-size: 24px; display: flex; align-items: center; justify-content: center; flex-direction: column; }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<div id="gameOverScreen">
  <p>Game Over!</p>
  <p>Tap to Play Again</p>
</div>

<script>
var canvas = document.getElementById('gameCanvas');
var ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

var bird = {
  x: 50,
  y: canvas.height / 2,
  width: 40,
  height: 40,
  gravity: 0.6, // Make gravity weaker for slower falling
  lift: -10,
  velocity: 0
};

var pipes = [];
var pipeWidth = 80;
var pipeGap = 150;
var pipeFrequency = 1500; // Increase frequency for slower pipe generation
var lastPipeTime = 0;

var score = 0;
var highScore = parseInt(localStorage.getItem('highScore')) || 0;

var gameRunning = false;

function showGameOverScreen(show) {
  document.getElementById('gameOverScreen').style.display = show ? 'flex' : 'none';
}

function updateBird() {
  bird.velocity += bird.gravity;
  bird.y += bird.velocity;

  if (bird.y >= canvas.height - bird.height) {
    bird.y = canvas.height - bird.height;
    gameOver();
  }

  if (bird.y <= 0) {
    bird.y = 0;
    gameOver();
  }
}

function updatePipes() {
  if (Date.now() - lastPipeTime > pipeFrequency) {
    var pipeHeight = Math.floor(Math.random() * (canvas.height - pipeGap));
    pipes.push({ x: canvas.width, y: 0, height: pipeHeight });
    lastPipeTime = Date.now();
  }

  pipes.forEach(function(pipe, index) {
    pipe.x -= 3; // Reduce speed for slower pipe movement

    if (pipe.x + pipeWidth < 0) {
      pipes.splice(index, 1);
      score++;
      highScore = Math.max(score, highScore);
      localStorage.setItem('highScore', highScore.toString());
    }
  });
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw bird
  ctx.fillStyle = 'yellow';
  ctx.fillRect(bird.x, bird.y, bird.width, bird.height);

  // Draw pipes
  ctx.fillStyle = 'green';
  pipes.forEach(function(pipe) {
    ctx.fillRect(pipe.x, pipe.y, pipeWidth, pipe.height);
    ctx.fillRect(pipe.x, pipe.height + pipeGap, pipeWidth, canvas.height);
  });

  // Draw score
  ctx.fillStyle = 'white';
  ctx.font = '40px Arial';
  ctx.fillText('Score: ' + score, 20, 50);
  ctx.fillText('High Score: ' + highScore, 20, 100);
}

function gameOver() {
  gameRunning = false;
  showGameOverScreen(true);
}

function gameLoop(timestamp) {
  if (gameRunning) {
    updateBird();
    updatePipes();
    draw();
  }
  requestAnimationFrame(gameLoop);
}

canvas.addEventListener('click', function() {
  if (!gameRunning) {
    gameRunning = true;
    bird.y = canvas.height / 2;
    bird.velocity = 0;
    pipes = [];
    score = 0;
    showGameOverScreen(false);
    lastPipeTime = Date.now() - pipeFrequency;
  } else {
    bird.velocity += bird.lift;
  }
});

canvas.addEventListener('touchstart', function(e) {
  e.preventDefault();
  canvas.click();
}, false);

requestAnimationFrame(gameLoop);
</script>

</body>
</html>
